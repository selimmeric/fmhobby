<HTML>
<HEAD>
<TITLE>Listing of C:\working\microchip\Firmware_Test1\src\zuvo300_main.c</TITLE>
<LINK rel=stylesheet href="udf_styles.css" type="text/css"
</HEAD>
<table class="">
<tr><td><code><i>     1</i> </code></td><td>#include&nbsp &lsaquo htc.h&rsaquo </code></td></tr>
<tr><td><code><i>     2</i> </code></td><td>#include&nbsp "zuvo_300.h"</code></td></tr>
<tr><td><code><i>     3</i> </code></td><td></code></td></tr>
<tr><td><code><i>     4</i> </code></td><td>//&nbsp RA0&nbsp -&nbsp ICSP_DATA</code></td></tr>
<tr><td><code><i>     5</i> </code></td><td>//&nbsp RA1&nbsp -&nbsp ICSP_CLK</code></td></tr>
<tr><td><code><i>     6</i> </code></td><td>//&nbsp RA2&nbsp -&nbsp Input&nbsp with&nbsp Pull&nbsp Up</code></td></tr>
<tr><td><code><i>     7</i> </code></td><td>//&nbsp RA3&nbsp -&nbsp MCLR</code></td></tr>
<tr><td><code><i>     8</i> </code></td><td>//&nbsp RA4&nbsp -&nbsp Output</code></td></tr>
<tr><td><code><i>     9</i> </code></td><td>//&nbsp RA5&nbsp -&nbsp Input</code></td></tr>
<tr><td><code><i>    10</i> </code></td><td></code></td></tr>
<tr><td><code><i>    11</i> </code></td><td>//&nbsp RC0&nbsp -&nbsp Output</code></td></tr>
<tr><td><code><i>    12</i> </code></td><td>//&nbsp RC1&nbsp -&nbsp Output</code></td></tr>
<tr><td><code><i>    13</i> </code></td><td>//&nbsp RC2&nbsp -&nbsp Output</code></td></tr>
<tr><td><code><i>    14</i> </code></td><td>//&nbsp RC3&nbsp -&nbsp Output</code></td></tr>
<tr><td><code><i>    15</i> </code></td><td>//&nbsp RC4&nbsp -&nbsp Output</code></td></tr>
<tr><td><code><i>    16</i> </code></td><td>//&nbsp RC5&nbsp -&nbsp Output</code></td></tr>
<tr><td><code><i>    17</i> </code></td><td></code></td></tr>
<tr><td><code><i>    18</i> </code></td><td></code></td></tr>
<tr><td><code><i>    19</i> </code></td><td>//&nbsp Declare&nbsp Global&nbsp variable</code></td></tr>
<tr><td><code><i>    20</i> </code></td><td></code></td></tr>
<tr><td><code><i>    21</i> </code></td><td>//&nbsp State&nbsp variable</code></td></tr>
<tr><td><code><i>    22</i> </code></td><td>//unsigned&nbsp char&nbsp mState_UVL=0;</code></td></tr>
<tr><td><code><i>    23</i> </code></td><td>//unsigned&nbsp char&nbsp mState_System=0;</code></td></tr>
<tr><td><code><i>    24</i> </code></td><td>//unsigned&nbsp int&nbsp &nbsp mState_DelayCnt=0;</code></td></tr>
<tr><td><code><i>    25</i> </code></td><td></code></td></tr>
<tr><td><code><i>    26</i> </code></td><td>//&nbsp Timer&nbsp Flag</code></td></tr>
<tr><td><code><i>    27</i> </code></td><td>unsigned&nbsp char&nbsp mTimer_Flag0=0; &nbsp&nbsp  &nbsp&nbsp //&nbsp 10mS&nbsp flag</code></td></tr>
<tr><td><code><i>    28</i> </code></td><td>unsigned&nbsp char&nbsp mFS_Cnt=0; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Flow&nbsp Sensor&nbsp Count</code></td></tr>
<tr><td><code><i>    29</i> </code></td><td></code></td></tr>
<tr><td><code><i>    30</i> </code></td><td>//unsigned&nbsp int&nbsp mFlowVol=0; &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Flow&nbsp Volume</code></td></tr>
<tr><td><code><i>    31</i> </code></td><td></code></td></tr>
<tr><td><code><i>    32</i> </code></td><td>unsigned&nbsp long&nbsp mRFID=0; &nbsp  &nbsp  &nbsp  &nbsp //&nbsp RFID</code></td></tr>
<tr><td><code><i>    33</i> </code></td><td></code></td></tr>
<tr><td><code><i>    34</i> </code></td><td>//&nbsp Output&nbsp variable</code></td></tr>
<tr><td><code><i>    35</i> </code></td><td>unsigned&nbsp char&nbsp mLED_Color=0;</code></td></tr>
<tr><td><code><i>    36</i> </code></td><td>unsigned&nbsp char&nbsp mUVL=0;</code></td></tr>
<tr><td><code><i>    37</i> </code></td><td>unsigned&nbsp char&nbsp mBuzzer=0;</code></td></tr>
<tr><td><code><i>    38</i> </code></td><td></code></td></tr>
<tr><td><code><i>    39</i> </code></td><td></code></td></tr>
<tr><td><code><i>    40</i> </code></td><td>//&nbsp Declare&nbsp Function&nbsp Prototype</code></td></tr>
<tr><td><code><i>    41</i> </code></td><td>void&nbsp system_input(void);</code></td></tr>
<tr><td><code><i>    42</i> </code></td><td>void&nbsp system_process(void);</code></td></tr>
<tr><td><code><i>    43</i> </code></td><td>void&nbsp system_output(void);</code></td></tr>
<tr><td><code><i>    44</i> </code></td><td></code></td></tr>
<tr><td><code><i>    45</i> </code></td><td>void&nbsp  &nbsp&nbsp LED_RGB(unsigned&nbsp char&nbsp ivalue);</code></td></tr>
<tr><td><code><i>    46</i> </code></td><td>void&nbsp  &nbsp&nbsp Buzzer(unsigned&nbsp char&nbsp iVal);</code></td></tr>
<tr><td><code><i>    47</i> </code></td><td>void&nbsp  &nbsp&nbsp UVL(unsigned&nbsp char&nbsp iVal);</code></td></tr>
<tr><td><code><i>    48</i> </code></td><td></code></td></tr>
<tr><td><code><i>    49</i> </code></td><td>unsigned&nbsp char&nbsp FS_RD(unsigned&nbsp char&nbsp iFS);</code></td></tr>
<tr><td><code><i>    50</i> </code></td><td>unsigned&nbsp long&nbsp RFID_RD(void);</code></td></tr>
<tr><td><code><i>    51</i> </code></td><td></code></td></tr>
<tr><td><code><i>    52</i> </code></td><td>void&nbsp test_io(void)</code></td></tr>
<tr><td><code><i>    53</i> </code></td><td>{</code></td></tr>
<tr><td><code><i>    54</i> </code></td><td></code></td></tr>
<tr><td><code><i>    55</i> </code></td><td>}</code></td></tr>
<tr><td><code><i>    56</i> </code></td><td></code></td></tr>
<tr><td><code><i>    57</i> </code></td><td>void&nbsp main&nbsp (void)</code></td></tr>
<tr><td><code><i>    58</i> </code></td><td>{&nbsp </code></td></tr>
<tr><td><code><i>    59</i> </code></td><td></code></td></tr>
<tr><td><code><i>    60</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp long&nbsp i=0,j=0;</code></td></tr>
<tr><td><code><i>    61</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp char&nbsp tmp=0;</code></td></tr>
<tr><td><code><i>    62</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp long&nbsp UVLCnt=0;</code></td></tr>
<tr><td><code><i>    63</i> </code></td><td></code></td></tr>
<tr><td><code><i>    64</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Initialize&nbsp IO&nbsp PORT&nbsp Direction&nbsp /&nbsp Initial&nbsp Value</code></td></tr>
<tr><td><code><i>    65</i> </code></td><td></code></td></tr>
<tr><td><code><i>    66</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp OSCCON &nbsp  &nbsp =&nbsp 0x72; &nbsp&nbsp  &nbsp&nbsp //&nbsp select&nbsp internal&nbsp osc.&nbsp 8MHz&nbsp 0x72</code></td></tr>
<tr><td><code><i>    67</i> </code></td><td></code></td></tr>
<tr><td><code><i>    68</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp TRISA&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp =&nbsp ~0x10;</code></td></tr>
<tr><td><code><i>    69</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ANSELA &nbsp  &nbsp =&nbsp 0x00;</code></td></tr>
<tr><td><code><i>    70</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp TRISA &nbsp&nbsp  &nbsp&nbsp =&nbsp 0xff;</code></td></tr>
<tr><td><code><i>    71</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp TRISC &nbsp&nbsp  &nbsp&nbsp =&nbsp ~0xff; &nbsp&nbsp </code></td></tr>
<tr><td><code><i>    72</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp OPTION_REG &nbsp&nbsp&nbsp&nbsp&nbsp =&nbsp 0x82; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Enable&nbsp internal&nbsp pull&nbsp ,&nbsp </code></td></tr>
<tr><td><code><i>    73</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp TMR0&nbsp PS&nbsp =&nbsp 8 &nbsp ,&nbsp TMR0&nbsp OverFlow&nbsp =&nbsp 1/8M&nbsp *&nbsp 4&nbsp *&nbsp 8&nbsp *&nbsp 256&nbsp =&nbsp 1.024mS</code></td></tr>
<tr><td><code><i>    74</i> </code></td><td></code></td></tr>
<tr><td><code><i>    75</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp WPUA&nbsp     =&nbsp 0x24; &nbsp  &nbsp  &nbsp //&nbsp Internal&nbsp Pull-Up</code></td></tr>
<tr><td><code><i>    76</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp WDTCON &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp =&nbsp 0x01;      //&nbsp WDT&nbsp @16ms</code></td></tr>
<tr><td><code><i>    77</i> </code></td><td></code></td></tr>
<tr><td><code><i>    78</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Initialize&nbsp Time</code></td></tr>
<tr><td><code><i>    79</i> </code></td><td></code></td></tr>
<tr><td><code><i>    80</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp T0IE&nbsp =&nbsp 1; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Enable&nbsp interrupt&nbsp on&nbsp TMR0&nbsp overflow</code></td></tr>
<tr><td><code><i>    81</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp INTEDG&nbsp =&nbsp 1; &nbsp&nbsp  &nbsp&nbsp //&nbsp falling&nbsp edge&nbsp trigger&nbsp the&nbsp interrupt</code></td></tr>
<tr><td><code><i>    82</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp INTE&nbsp =&nbsp 1; &nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp //&nbsp enable&nbsp the&nbsp external&nbsp interrupt</code></td></tr>
<tr><td><code><i>    83</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp GIE&nbsp =&nbsp 1; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Global&nbsp interrupt&nbsp enable</code></td></tr>
<tr><td><code><i>    84</i> </code></td><td></code></td></tr>
<tr><td><code><i>    85</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Initialize&nbsp System&nbsp State&nbsp Variable</code></td></tr>
<tr><td><code><i>    86</i> </code></td><td></code></td></tr>
<tr><td><code><i>    87</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mLED_Color&nbsp =&nbsp 0x00;</code></td></tr>
<tr><td><code><i>    88</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mUVL &nbsp&nbsp&nbsp &nbsp &nbsp &nbsp =&nbsp 0x01;</code></td></tr>
<tr><td><code><i>    89</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mBuzzer&nbsp &nbsp &nbsp &nbsp =&nbsp 0x00;</code></td></tr>
<tr><td><code><i>    90</i> </code></td><td></code></td></tr>
<tr><td><code><i>    91</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Start&nbsp Task</code></td></tr>
<tr><td><code><i>    92</i> </code></td><td></code></td></tr>
<tr><td><code><i>    93</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATC&nbsp =&nbsp 0x1c;</code></td></tr>
<tr><td><code><i>    94</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATA&nbsp =&nbsp 0xff;</code></td></tr>
<tr><td><code><i>    95</i> </code></td><td></code></td></tr>
<tr><td><code><i>    96</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp while&nbsp (1)</code></td></tr>
<tr><td><code><i>    97</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp {</code></td></tr>
<tr><td><code><i>    98</i> </code></td><td></code></td></tr>
<tr><td><code><i>    99</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp CLRWDT();</code></td></tr>
<tr><td><code><i>   100</i> </code></td><td></code></td></tr>
<tr><td><code><i>   101</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (mTimer_Flag0) &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>   102</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp {</code></td></tr>
<tr><td><code><i>   103</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp @&nbsp 10.24mS</code></td></tr>
<tr><td><code><i>   104</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mTimer_Flag0&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>   105</i> </code></td><td></code></td></tr>
<tr><td><code><i>   106</i> </code></td><td></code></td></tr>
<tr><td><code><i>   107</i> </code></td><td></code></td></tr>
<tr><td><code><i>   108</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp --------------------------------------------------</code></td></tr>
<tr><td><code><i>   109</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Prepare&nbsp Input&nbsp Variable</code></td></tr>
<tr><td><code><i>   110</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //---------------------------------------------------</code></td></tr>
<tr><td><code><i>   111</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp system_input();</code></td></tr>
<tr><td><code><i>   112</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp mRFID&nbsp =&nbsp RFID_RD();</code></td></tr>
<tr><td><code><i>   113</i> </code></td><td></code></td></tr>
<tr><td><code><i>   114</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp --------------------------------------------------</code></td></tr>
<tr><td><code><i>   115</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Process&nbsp state&nbsp input</code></td></tr>
<tr><td><code><i>   116</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //---------------------------------------------------</code></td></tr>
<tr><td><code><i>   117</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp system_process();</code></td></tr>
<tr><td><code><i>   118</i> </code></td><td></code></td></tr>
<tr><td><code><i>   119</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp --------------------------------------------------</code></td></tr>
<tr><td><code><i>   120</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Output&nbsp Variable&nbsp to&nbsp Device&nbsp Output&nbsp </code></td></tr>
<tr><td><code><i>   121</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //---------------------------------------------------</code></td></tr>
<tr><td><code><i>   122</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp system_output();</code></td></tr>
<tr><td><code><i>   123</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>   124</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   125</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   126</i> </code></td><td></code></td></tr>
<tr><td><code><i>   127</i> </code></td><td>}</code></td></tr>
<tr><td><code><i>   128</i> </code></td><td></code></td></tr>
<tr><td><code><i>   129</i> </code></td><td>static&nbsp void&nbsp interrupt</code></td></tr>
<tr><td><code><i>   130</i> </code></td><td>isr(void) &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Here&nbsp be&nbsp interrupt&nbsp function&nbsp -&nbsp the&nbsp name&nbsp is&nbsp unimportant.</code></td></tr>
<tr><td><code><i>   131</i> </code></td><td>{</code></td></tr>
<tr><td><code><i>   132</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp static&nbsp unsigned&nbsp char&nbsp tCntA&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>   133</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp static&nbsp unsigned&nbsp char&nbsp pFS_IN=&nbsp 0;</code></td></tr>
<tr><td><code><i>   134</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp char&nbsp tFS_IN;</code></td></tr>
<tr><td><code><i>   135</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>   136</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if(T0IF)&nbsp { &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp timer&nbsp interrupt&nbsp @&nbsp 1.024ms</code></td></tr>
<tr><td><code><i>   137</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp T0IF&nbsp =&nbsp 0; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp clear&nbsp the&nbsp interrupt&nbsp flag</code></td></tr>
<tr><td><code><i>   138</i> </code></td><td></code></td></tr>
<tr><td><code><i>   139</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tFS_IN&nbsp =&nbsp PORTAbits.RA2;    </code></td></tr>
<tr><td><code><i>   140</i> </code></td><td></code></td></tr>
<tr><td><code><i>   141</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp ((pFS_IN&nbsp !=&nbsp tFS_IN)&nbsp &&&nbsp (tFS_IN&nbsp !=0))</code></td></tr>
<tr><td><code><i>   142</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mFS_Cnt&nbsp ++;</code></td></tr>
<tr><td><code><i>   143</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp pFS_IN&nbsp =&nbsp tFS_IN;</code></td></tr>
<tr><td><code><i>   144</i> </code></td><td></code></td></tr>
<tr><td><code><i>   145</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tCntA++;</code></td></tr>
<tr><td><code><i>   146</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (tCntA&rsaquo =10)</code></td></tr>
<tr><td><code><i>   147</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp {</code></td></tr>
<tr><td><code><i>   148</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tCntA&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>   149</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mTimer_Flag0&nbsp =&nbsp 1;</code></td></tr>
<tr><td><code><i>   150</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   151</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   152</i> </code></td><td></code></td></tr>
<tr><td><code><i>   153</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if(INTF)&nbsp { &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp did&nbsp we&nbsp see&nbsp a&nbsp button&nbsp press?</code></td></tr>
<tr><td><code><i>   154</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp INTF&nbsp =&nbsp 0; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp clear&nbsp the&nbsp interrupt</code></td></tr>
<tr><td><code><i>   155</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   156</i> </code></td><td></code></td></tr>
<tr><td><code><i>   157</i> </code></td><td>}</code></td></tr>
<tr><td><code><i>   158</i> </code></td><td>/*</code></td></tr>
<tr><td><code><i>   159</i> </code></td><td></code></td></tr>
<tr><td><code><i>   160</i> </code></td><td>void&nbsp system_input(void)</code></td></tr>
<tr><td><code><i>   161</i> </code></td><td>{</code></td></tr>
<tr><td><code><i>   162</i> </code></td><td></code></td></tr>
<tr><td><code><i>   163</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mRFID_CTag&nbsp =&nbsp RFID_RD();  </code></td></tr>
<tr><td><code><i>   164</i> </code></td><td></code></td></tr>
<tr><td><code><i>   165</i> </code></td><td>}</code></td></tr>
<tr><td><code><i>   166</i> </code></td><td>*/</code></td></tr>
<tr><td><code><i>   167</i> </code></td><td>//&nbsp Call&nbsp @&nbsp 10.24mS</code></td></tr>
<tr><td><code><i>   168</i> </code></td><td>void&nbsp system_1s(void)</code></td></tr>
<tr><td><code><i>   169</i> </code></td><td>{</code></td></tr>
<tr><td><code><i>   170</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp static&nbsp unsigned&nbsp char&nbsp tSec=60;</code></td></tr>
<tr><td><code><i>   171</i> </code></td><td></code></td></tr>
<tr><td><code><i>   172</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp mBuzzer&nbsp =&nbsp 0x81;</code></td></tr>
<tr><td><code><i>   173</i> </code></td><td></code></td></tr>
<tr><td><code><i>   174</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp switch&nbsp (tSec)</code></td></tr>
<tr><td><code><i>   175</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp {</code></td></tr>
<tr><td><code><i>   176</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 0:</code></td></tr>
<tr><td><code><i>   177</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mLED_Color&nbsp =&nbsp 0x01; &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Solid&nbsp Green</code></td></tr>
<tr><td><code><i>   178</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp mBuzzer&nbsp =&nbsp 0x00; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Buzzer&nbsp OFF</code></td></tr>
<tr><td><code><i>   179</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   180</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 15:</code></td></tr>
<tr><td><code><i>   181</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mLED_Color&nbsp =&nbsp 0x82; &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Blue&nbsp Blink</code></td></tr>
<tr><td><code><i>   182</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp mBuzzer&nbsp =&nbsp 0x00; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Buzzer&nbsp OFF</code></td></tr>
<tr><td><code><i>   183</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   184</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 30:</code></td></tr>
<tr><td><code><i>   185</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mLED_Color&nbsp =&nbsp 0x02; &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Blue&nbsp Solid</code></td></tr>
<tr><td><code><i>   186</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp mBuzzer&nbsp =&nbsp 0x00; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Buzzer&nbsp ON</code></td></tr>
<tr><td><code><i>   187</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   188</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 45:</code></td></tr>
<tr><td><code><i>   189</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mLED_Color&nbsp =&nbsp 0x05; &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Yellow&nbsp Solid&nbsp =&nbsp R&nbsp +&nbsp G</code></td></tr>
<tr><td><code><i>   190</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp mBuzzer&nbsp =&nbsp 0x81; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Buzzer&nbsp ON</code></td></tr>
<tr><td><code><i>   191</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   192</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 60:</code></td></tr>
<tr><td><code><i>   193</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mLED_Color&nbsp =&nbsp 0x84; &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Red&nbsp Blink</code></td></tr>
<tr><td><code><i>   194</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp mBuzzer&nbsp =&nbsp 0x01; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Buzzer&nbsp ON</code></td></tr>
<tr><td><code><i>   195</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   196</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 75:</code></td></tr>
<tr><td><code><i>   197</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mLED_Color&nbsp =&nbsp 0x04; &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Red&nbsp Solid</code></td></tr>
<tr><td><code><i>   198</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp mBuzzer&nbsp =&nbsp 0x00; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Buzzer&nbsp ON</code></td></tr>
<tr><td><code><i>   199</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   200</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 90:</code></td></tr>
<tr><td><code><i>   201</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mLED_Color&nbsp =&nbsp 0xD4; &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Red/Yellow</code></td></tr>
<tr><td><code><i>   202</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp mBuzzer&nbsp =&nbsp 0x00; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Buzzer&nbsp ON</code></td></tr>
<tr><td><code><i>   203</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   204</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp case&nbsp 105:</code></td></tr>
<tr><td><code><i>   205</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mLED_Color&nbsp =&nbsp 0x94; &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Red/Green</code></td></tr>
<tr><td><code><i>   206</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp mBuzzer&nbsp =&nbsp 0x00; &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Buzzer&nbsp ON</code></td></tr>
<tr><td><code><i>   207</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp break;</code></td></tr>
<tr><td><code><i>   208</i> </code></td><td></code></td></tr>
<tr><td><code><i>   209</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   210</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tSec&nbsp ++;</code></td></tr>
<tr><td><code><i>   211</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (tSec&nbsp &rsaquo =&nbsp 120)</code></td></tr>
<tr><td><code><i>   212</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tSec&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>   213</i> </code></td><td></code></td></tr>
<tr><td><code><i>   214</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mRFID&nbsp =&nbsp RFID_RD();&nbsp </code></td></tr>
<tr><td><code><i>   215</i> </code></td><td></code></td></tr>
<tr><td><code><i>   216</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (mRFID&nbsp ==0)</code></td></tr>
<tr><td><code><i>   217</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mBuzzer&nbsp =&nbsp mBuzzer&nbsp ^&nbsp 0x01;</code></td></tr>
<tr><td><code><i>   218</i> </code></td><td></code></td></tr>
<tr><td><code><i>   219</i> </code></td><td>}</code></td></tr>
<tr><td><code><i>   220</i> </code></td><td></code></td></tr>
<tr><td><code><i>   221</i> </code></td><td>void&nbsp system_process(void)</code></td></tr>
<tr><td><code><i>   222</i> </code></td><td>{</code></td></tr>
<tr><td><code><i>   223</i> </code></td><td></code></td></tr>
<tr><td><code><i>   224</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp static&nbsp unsigned&nbsp int&nbsp tTMR_1S_CNT=0;</code></td></tr>
<tr><td><code><i>   225</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp static&nbsp unsigned&nbsp int&nbsp tDelay=0;</code></td></tr>
<tr><td><code><i>   226</i> </code></td><td></code></td></tr>
<tr><td><code><i>   227</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp char&nbsp tFC=0;</code></td></tr>
<tr><td><code><i>   228</i> </code></td><td></code></td></tr>
<tr><td><code><i>   229</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Update&nbsp acc.&nbsp flow&nbsp count</code></td></tr>
<tr><td><code><i>   230</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tFC&nbsp =&nbsp FS_RD(mFS_Cnt);</code></td></tr>
<tr><td><code><i>   231</i> </code></td><td></code></td></tr>
<tr><td><code><i>   232</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (tFC&nbsp !=&nbsp 0)</code></td></tr>
<tr><td><code><i>   233</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tDelay=300;</code></td></tr>
<tr><td><code><i>   234</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp else&nbsp if&nbsp (tDelay&nbsp &rsaquo &nbsp 0)</code></td></tr>
<tr><td><code><i>   235</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tDelay--;</code></td></tr>
<tr><td><code><i>   236</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>   237</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (tDelay&nbsp ==&nbsp 0)</code></td></tr>
<tr><td><code><i>   238</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mUVL&nbsp =&nbsp 0;</code></td></tr>
<tr><td><code><i>   239</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp else</code></td></tr>
<tr><td><code><i>   240</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp mUVL&nbsp =&nbsp 1;</code></td></tr>
<tr><td><code><i>   241</i> </code></td><td></code></td></tr>
<tr><td><code><i>   242</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp mUVL&nbsp =&nbsp (mFS_Cnt&nbsp &rsaquo &rsaquo &nbsp 2)&nbsp &&nbsp 0x01;</code></td></tr>
<tr><td><code><i>   243</i> </code></td><td></code></td></tr>
<tr><td><code><i>   244</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp UVL(mUVL);</code></td></tr>
<tr><td><code><i>   245</i> </code></td><td></code></td></tr>
<tr><td><code><i>   246</i> </code></td><td></code></td></tr>
<tr><td><code><i>   247</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tTMR_1S_CNT&nbsp ++;  </code></td></tr>
<tr><td><code><i>   248</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (tTMR_1S_CNT&nbsp &rsaquo =&nbsp (1/SYS_CYCLE))</code></td></tr>
<tr><td><code><i>   249</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp {</code></td></tr>
<tr><td><code><i>   250</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tTMR_1S_CNT&nbsp =0;</code></td></tr>
<tr><td><code><i>   251</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp system_1s();</code></td></tr>
<tr><td><code><i>   252</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   253</i> </code></td><td></code></td></tr>
<tr><td><code><i>   254</i> </code></td><td>}</code></td></tr>
<tr><td><code><i>   255</i> </code></td><td></code></td></tr>
<tr><td><code><i>   256</i> </code></td><td>//&nbsp Checked</code></td></tr>
<tr><td><code><i>   257</i> </code></td><td></code></td></tr>
<tr><td><code><i>   258</i> </code></td><td>void&nbsp system_output(void)</code></td></tr>
<tr><td><code><i>   259</i> </code></td><td>{</code></td></tr>
<tr><td><code><i>   260</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp char&nbsp tmp;</code></td></tr>
<tr><td><code><i>   261</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp char&nbsp ttmp;</code></td></tr>
<tr><td><code><i>   262</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp static&nbsp unsigned&nbsp int&nbsp tLED_FlashCnt=0;</code></td></tr>
<tr><td><code><i>   263</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp static&nbsp unsigned&nbsp int&nbsp tBuzzer_FlashCnt=0;</code></td></tr>
<tr><td><code><i>   264</i> </code></td><td></code></td></tr>
<tr><td><code><i>   265</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp UVL</code></td></tr>
<tr><td><code><i>   266</i> </code></td><td>// &nbsp&nbsp&nbsp&nbsp&nbsp UVL(mUVL);</code></td></tr>
<tr><td><code><i>   267</i> </code></td><td></code></td></tr>
<tr><td><code><i>   268</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp LED&nbsp Flashing</code></td></tr>
<tr><td><code><i>   269</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp ((mLED_Color&nbsp &&nbsp 0x80)&nbsp ==0)</code></td></tr>
<tr><td><code><i>   270</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tLED_FlashCnt=0;</code></td></tr>
<tr><td><code><i>   271</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp else</code></td></tr>
<tr><td><code><i>   272</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tLED_FlashCnt++;</code></td></tr>
<tr><td><code><i>   273</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>   274</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tmp&nbsp =&nbsp mLED_Color&nbsp &&nbsp 0x07;</code></td></tr>
<tr><td><code><i>   275</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp ((tLED_FlashCnt&rsaquo =LED_ON_PER)&nbsp &&&nbsp (tLED_FlashCnt&lsaquo =(LED_OFF_PER+LED_ON_PER)))</code></td></tr>
<tr><td><code><i>   276</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp {</code></td></tr>
<tr><td><code><i>   277</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tmp&nbsp =&nbsp (mLED_Color&nbsp &rsaquo &rsaquo &nbsp 4)&nbsp &&nbsp 0x07;</code></td></tr>
<tr><td><code><i>   278</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   279</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp else&nbsp if&nbsp (tLED_FlashCnt&rsaquo (LED_OFF_PER+LED_ON_PER))</code></td></tr>
<tr><td><code><i>   280</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp {</code></td></tr>
<tr><td><code><i>   281</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tLED_FlashCnt&nbsp =0;</code></td></tr>
<tr><td><code><i>   282</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   283</i> </code></td><td></code></td></tr>
<tr><td><code><i>   284</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Output&nbsp LED</code></td></tr>
<tr><td><code><i>   285</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LED_RGB(tmp);&nbsp </code></td></tr>
<tr><td><code><i>   286</i> </code></td><td></code></td></tr>
<tr><td><code><i>   287</i> </code></td><td></code></td></tr>
<tr><td><code><i>   288</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Buzzer&nbsp Flashing</code></td></tr>
<tr><td><code><i>   289</i> </code></td><td></code></td></tr>
<tr><td><code><i>   290</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp ((mBuzzer&nbsp &&nbsp 0x80)&nbsp ==&nbsp 0)</code></td></tr>
<tr><td><code><i>   291</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tBuzzer_FlashCnt=0; &nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>   292</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp else</code></td></tr>
<tr><td><code><i>   293</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tBuzzer_FlashCnt++;</code></td></tr>
<tr><td><code><i>   294</i> </code></td><td></code></td></tr>
<tr><td><code><i>   295</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ttmp&nbsp =&nbsp mBuzzer&nbsp &&nbsp 0x01;</code></td></tr>
<tr><td><code><i>   296</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp ((tBuzzer_FlashCnt&rsaquo =BUZZER_ON_PER)&nbsp &&&nbsp (tBuzzer_FlashCnt&lsaquo =(BUZZER_OFF_PER+BUZZER_ON_PER)))</code></td></tr>
<tr><td><code><i>   297</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp {</code></td></tr>
<tr><td><code><i>   298</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp ttmp&nbsp =&nbsp 0x00;</code></td></tr>
<tr><td><code><i>   299</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   300</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp else&nbsp if&nbsp (tBuzzer_FlashCnt&rsaquo (BUZZER_OFF_PER+BUZZER_ON_PER))</code></td></tr>
<tr><td><code><i>   301</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp {</code></td></tr>
<tr><td><code><i>   302</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tBuzzer_FlashCnt&nbsp =0;</code></td></tr>
<tr><td><code><i>   303</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   304</i> </code></td><td></code></td></tr>
<tr><td><code><i>   305</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Output&nbsp LED</code></td></tr>
<tr><td><code><i>   306</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp Buzzer(ttmp);&nbsp </code></td></tr>
<tr><td><code><i>   307</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp </code></td></tr>
<tr><td><code><i>   308</i> </code></td><td>}</code></td></tr>
<tr><td><code><i>   309</i> </code></td><td></code></td></tr>
<tr><td><code><i>   310</i> </code></td><td></code></td></tr>
<tr><td><code><i>   311</i> </code></td><td>//&nbsp Output&nbsp Function</code></td></tr>
<tr><td><code><i>   312</i> </code></td><td></code></td></tr>
<tr><td><code><i>   313</i> </code></td><td>void&nbsp LED_RGB(unsigned&nbsp char&nbsp iVal)</code></td></tr>
<tr><td><code><i>   314</i> </code></td><td>{</code></td></tr>
<tr><td><code><i>   315</i> </code></td><td></code></td></tr>
<tr><td><code><i>   316</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp char&nbsp tPort;</code></td></tr>
<tr><td><code><i>   317</i> </code></td><td></code></td></tr>
<tr><td><code><i>   318</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tPort&nbsp =&nbsp LATC&nbsp &&nbsp (~(0x07&lsaquo &lsaquo 2));</code></td></tr>
<tr><td><code><i>   319</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tPort&nbsp =&nbsp tPort&nbsp |&nbsp ((~iVal&nbsp &&nbsp 0x07)&lsaquo &lsaquo 2);</code></td></tr>
<tr><td><code><i>   320</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATC&nbsp &nbsp =&nbsp tPort;</code></td></tr>
<tr><td><code><i>   321</i> </code></td><td></code></td></tr>
<tr><td><code><i>   322</i> </code></td><td>}</code></td></tr>
<tr><td><code><i>   323</i> </code></td><td></code></td></tr>
<tr><td><code><i>   324</i> </code></td><td>void&nbsp Buzzer(unsigned&nbsp char&nbsp iVal)</code></td></tr>
<tr><td><code><i>   325</i> </code></td><td>{</code></td></tr>
<tr><td><code><i>   326</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp char&nbsp tPort;</code></td></tr>
<tr><td><code><i>   327</i> </code></td><td></code></td></tr>
<tr><td><code><i>   328</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tPort&nbsp =&nbsp LATC&nbsp &&nbsp (~(1&lsaquo &lsaquo PIN_BUZZER));</code></td></tr>
<tr><td><code><i>   329</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tPort&nbsp =&nbsp tPort&nbsp |&nbsp ((iVal&nbsp &&nbsp 0x01)&lsaquo &lsaquo PIN_BUZZER);</code></td></tr>
<tr><td><code><i>   330</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATC&nbsp &nbsp =&nbsp tPort;</code></td></tr>
<tr><td><code><i>   331</i> </code></td><td></code></td></tr>
<tr><td><code><i>   332</i> </code></td><td>}</code></td></tr>
<tr><td><code><i>   333</i> </code></td><td></code></td></tr>
<tr><td><code><i>   334</i> </code></td><td></code></td></tr>
<tr><td><code><i>   335</i> </code></td><td>void&nbsp UVL(unsigned&nbsp char&nbsp iVal)</code></td></tr>
<tr><td><code><i>   336</i> </code></td><td>{</code></td></tr>
<tr><td><code><i>   337</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp char&nbsp tPort;</code></td></tr>
<tr><td><code><i>   338</i> </code></td><td></code></td></tr>
<tr><td><code><i>   339</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tPort&nbsp =&nbsp LATC&nbsp &&nbsp (~(1&lsaquo &lsaquo PIN_UVL));</code></td></tr>
<tr><td><code><i>   340</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tPort&nbsp =&nbsp tPort&nbsp |&nbsp ((iVal&nbsp &&nbsp 0x01)&lsaquo &lsaquo PIN_UVL);</code></td></tr>
<tr><td><code><i>   341</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATC&nbsp &nbsp =&nbsp tPort;</code></td></tr>
<tr><td><code><i>   342</i> </code></td><td></code></td></tr>
<tr><td><code><i>   343</i> </code></td><td>}</code></td></tr>
<tr><td><code><i>   344</i> </code></td><td></code></td></tr>
<tr><td><code><i>   345</i> </code></td><td></code></td></tr>
<tr><td><code><i>   346</i> </code></td><td>//&nbsp Input&nbsp Process&nbsp Function</code></td></tr>
<tr><td><code><i>   347</i> </code></td><td></code></td></tr>
<tr><td><code><i>   348</i> </code></td><td>unsigned&nbsp char&nbsp FS_RD(unsigned&nbsp char&nbsp iFS)</code></td></tr>
<tr><td><code><i>   349</i> </code></td><td>{</code></td></tr>
<tr><td><code><i>   350</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp static&nbsp unsigned&nbsp char&nbsp pFS=0;</code></td></tr>
<tr><td><code><i>   351</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp int&nbsp tFS=0;</code></td></tr>
<tr><td><code><i>   352</i> </code></td><td></code></td></tr>
<tr><td><code><i>   353</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tFS&nbsp =&nbsp iFS;</code></td></tr>
<tr><td><code><i>   354</i> </code></td><td></code></td></tr>
<tr><td><code><i>   355</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp (pFS&nbsp &rsaquo &nbsp iFS)</code></td></tr>
<tr><td><code><i>   356</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tFS&nbsp +=&nbsp 0x100;</code></td></tr>
<tr><td><code><i>   357</i> </code></td><td></code></td></tr>
<tr><td><code><i>   358</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tFS&nbsp -=&nbsp pFS;</code></td></tr>
<tr><td><code><i>   359</i> </code></td><td></code></td></tr>
<tr><td><code><i>   360</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp pFS&nbsp =&nbsp iFS;</code></td></tr>
<tr><td><code><i>   361</i> </code></td><td></code></td></tr>
<tr><td><code><i>   362</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp return&nbsp (tFS&nbsp &&nbsp 0xff);</code></td></tr>
<tr><td><code><i>   363</i> </code></td><td></code></td></tr>
<tr><td><code><i>   364</i> </code></td><td>}</code></td></tr>
<tr><td><code><i>   365</i> </code></td><td></code></td></tr>
<tr><td><code><i>   366</i> </code></td><td></code></td></tr>
<tr><td><code><i>   367</i> </code></td><td>unsigned&nbsp long&nbsp RFID_RD(void)</code></td></tr>
<tr><td><code><i>   368</i> </code></td><td>{</code></td></tr>
<tr><td><code><i>   369</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp int&nbsp i=0;</code></td></tr>
<tr><td><code><i>   370</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp unsigned&nbsp long&nbsp tRFID=0;;</code></td></tr>
<tr><td><code><i>   371</i> </code></td><td></code></td></tr>
<tr><td><code><i>   372</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Clear&nbsp CLK,&nbsp CMD&nbsp pin</code></td></tr>
<tr><td><code><i>   373</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATA&nbsp &=&nbsp ~(1&lsaquo &lsaquo PIN_CMD);</code></td></tr>
<tr><td><code><i>   374</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATC&nbsp &=&nbsp ~(1&lsaquo &lsaquo PIN_CLK);</code></td></tr>
<tr><td><code><i>   375</i> </code></td><td></code></td></tr>
<tr><td><code><i>   376</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp TD&nbsp goes&nbsp LOW&nbsp -&nbsp Tag&nbsp detected</code></td></tr>
<tr><td><code><i>   377</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Reload&nbsp Fifo</code></td></tr>
<tr><td><code><i>   378</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATA&nbsp |=&nbsp (1&lsaquo &lsaquo PIN_CMD);</code></td></tr>
<tr><td><code><i>   379</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp for&nbsp (i=0;&nbsp i&lsaquo 2;&nbsp i++)</code></td></tr>
<tr><td><code><i>   380</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp {</code></td></tr>
<tr><td><code><i>   381</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATC&nbsp |=&nbsp ((1&lsaquo &lsaquo PIN_CLK));  </code></td></tr>
<tr><td><code><i>   382</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATC&nbsp &=&nbsp ~((1&lsaquo &lsaquo PIN_CLK));</code></td></tr>
<tr><td><code><i>   383</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   384</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATA&nbsp &=&nbsp ~(1&lsaquo &lsaquo PIN_CMD);</code></td></tr>
<tr><td><code><i>   385</i> </code></td><td></code></td></tr>
<tr><td><code><i>   386</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp //&nbsp Send&nbsp 16&nbsp clk&nbsp to&nbsp read&nbsp ID</code></td></tr>
<tr><td><code><i>   387</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp for&nbsp (i=0;&nbsp i&lsaquo 16;&nbsp i++)</code></td></tr>
<tr><td><code><i>   388</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp {</code></td></tr>
<tr><td><code><i>   389</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATC&nbsp |=&nbsp ((1&lsaquo &lsaquo PIN_CLK));  </code></td></tr>
<tr><td><code><i>   390</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp LATC&nbsp &=&nbsp ~((1&lsaquo &lsaquo PIN_CLK));</code></td></tr>
<tr><td><code><i>   391</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tRFID&nbsp =&nbsp tRFID&nbsp &lsaquo &lsaquo &nbsp 1;</code></td></tr>
<tr><td><code><i>   392</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp if&nbsp ((PORTA&nbsp &&nbsp (1&lsaquo &lsaquo PIN_DATA)))</code></td></tr>
<tr><td><code><i>   393</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp tRFID&nbsp +=1;</code></td></tr>
<tr><td><code><i>   394</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp }</code></td></tr>
<tr><td><code><i>   395</i> </code></td><td></code></td></tr>
<tr><td><code><i>   396</i> </code></td><td> &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp return&nbsp (tRFID);</code></td></tr>
<tr><td><code><i>   397</i> </code></td><td>}</code></HTML>
